<html>
<title>Genie</title>
<body>
<style>
.center{
display:block;
margin-left:auto;
margin-right:auto;
width:25%
}

.center_text{
color:#00FFFF;
display:block;
margin-left:auto;
margin-right:auto;
width:25%
}
</style>

<h1 class="center_text">Genie Sentiment Analysis</h1>

<img id="image" src="https://vignette.wikia.nocookie.net/lotc-creature-index/images/8/8c/Genie.png/revision/latest/scale-to-width-down/220?cb=20150826214144" width=500 height=500 class="center">
<br>

<div class="center">
Input Text <input type="text" name="userInput">
<input type="button" name="submit_button" value="Check" onClick="when_clicked();">
 <h2 name="type"></h2> 
 <h2 name="value"></h2>
</div>

<script>
function when_clicked()
{
var user_input=document.getElementsByName("userInput")[0].value;

var http= new XMLHttpRequest();
var url="https://api.dandelion.eu/datatxt/sent/v1";
var token="8243df2b739e4df2a8c3cc0fd8afa415";
var params="text="+user_input+"&token=8243df2b739e4df2a8c3cc0fd8afa415&lang=en";
http.open('POST',url,true);
http.setRequestHeader('Content-type','application/x-www-form-urlencoded');
http.onreadystatechange = function() {//Call a function when the state changes.
    if(http.readyState == 4 && http.status == 200) {
			var res=http.responseText;
			res=JSON.parse(res);
			//alert(res.sentiment.type + " "+res.sentiment.score);
			var image=document.getElementById("image");
			if(res.sentiment.type=="negative")
			{
			
			image.src="https://media.giphy.com/media/3ohrypGmT9bFovUzmM/giphy.gif";
			
			}else if (res.sentiment.type=="positive")
			{
			image.src="https://media.tenor.com/images/52f5b75df727ddeeb0501f02735a56f2/tenor.gif";			
			}
			
			
			document.getElementsByName("type")[0].innerHTML="Sentiment :"+res.sentiment.type;
			document.getElementsByName("value")[0].innerHTML="Confidence : "+res.sentiment.score;

    }
}
http.send(params);



}
</script>
</body>
</html>
